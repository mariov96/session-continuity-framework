{
  "_scf_header": {
    "framework": "Session Continuity Framework",
    "repository": "https://github.com/mariov96/session-continuity-framework",
    "creator": "Mario Vaccari",
    "description": "This file uses Session Continuity Framework to maintain perfect context across AI sessions. SCF transforms AI from order-taker to informed project partner."
  },
  "_scf_metadata": {
    "scf_home": "/home/mario/projects/session-continuity-framework",
    "scf_version": "v2.0.0",
    "last_sync_date": null,
    "last_sync_from": null,
    "sync_status": "unknown",
    "features_available": [
      "self_aware_buildstate",
      "github_copilot_integration",
      "agents_md_compatibility",
      "inheritance_chain",
      "change_notifications"
    ],
    "phone_home_command": "python3 /home/mario/projects/session-continuity-framework/update_scf.py {project_path}",
    "health_check_command": "python3 -c \"import json; from pathlib import Path; bs=json.loads(Path('buildstate.json').read_text()); print('SCF Status:', '\u2705 Self-aware' if '_session_state' in bs else '\u274c Needs update'); print('Copilot:', '\u2705' if Path('.github/copilot-instructions.md').exists() else '\u274c'); print('AGENTS.md:', '\u2705' if Path('AGENTS.md').exists() else '\u274c')\"",
    "structure_version": "v2-dotscf",
    "expected_location": ".scf/BUILDSTATE.json"
  },
  "_session_state": {
    "last_session_id": null,
    "last_modified_by": null,
    "last_modified_at": null,
    "session_count": 0,
    "requires_review": false,
    "review_reason": null,
    "scf_hub": "/home/mario/projects/session-continuity-framework",
    "active_voice": null,
    "voice_sessions": {}
  },
  "meta": {
    "spec": "v1.1-technical",
    "companion": "buildstate.md v1.1-strategic",
    "repo": "new-project",
    "purpose": "Technical implementation, debugging, feature development",
    "last_sync": "2025-11-08T00:00:00Z",
    "rebalance_trigger": "major_feature_completion | arch_change | performance_milestone"
  },
  "project": {
    "name": "Project Name TBD",
    "version": "0.1",
    "type": "TBD",
    "stakeholder": "TBD",
    "phase": "ideation"
  },
  "current_state": {
    "implemented": [],
    "in_progress": [],
    "blocked": [],
    "performance_metrics": {}
  },
  "features": [
    {
      "id": "TBD",
      "name": "TBD",
      "priority": "high|medium|low",
      "status": "\ud83d\udd04 planned | \ud83d\udea7 in_progress | \u2705 complete | \u274c blocked",
      "desc": "Define feature purpose and acceptance criteria"
    }
  ],
  "user_stories": [
    "As a [user type], I want [functionality] so that [benefit]"
  ],
  "success_metrics": [
    "Define measurable outcomes during planning"
  ],
  "bugs": [],
  "tech_stack": {
    "frontend": [],
    "backend": [],
    "database": [],
    "deployment": [],
    "testing": []
  },
  "architecture": {
    "components": [],
    "services": [],
    "data_flow": "",
    "state_management": "",
    "error_strategy": ""
  },
  "structure": {
    "src/": "Main source code directory",
    "docs/": "Documentation and guides",
    "tests/": "Test suites and fixtures",
    "config/": "Configuration files"
  },
  "models": {
    "example": {
      "desc": "Define data model structure and relationships"
    }
  },
  "api_docs": {
    "base_url": "TBD",
    "endpoints": [],
    "authentication": "TBD"
  },
  "requirements": {
    "functional": [],
    "non_functional": [],
    "constraints": [],
    "assumptions": []
  },
  "acceptance_criteria": [],
  "next_immediate": [
    "Define initial project scope",
    "Set up development environment",
    "Create basic project structure"
  ],
  "development": {
    "env_vars": [],
    "commands": {
      "start": "TBD",
      "test": "TBD",
      "build": "TBD",
      "deploy": "TBD"
    },
    "setup_notes": []
  },
  "environment": {
    "phase": "Ideation",
    "focus": "Define scope, stack, and architecture",
    "api_url": "TBD",
    "proxy": "TBD"
  },
  "performance": {
    "requirements": [],
    "constraints": [],
    "targets": []
  },
  "coding_standards": {
    "organization": "Modular components, separate logic/services, grouped folders",
    "naming": {
      "components": "PascalCase",
      "functions": "camelCase",
      "constants": "UPPER_SNAKE_CASE",
      "files": "kebab-case"
    },
    "languages": [],
    "frameworks": [],
    "patterns": [],
    "conventions": {},
    "errors": [
      "Try-catch async operations",
      "Detailed logging",
      "User-friendly error messages"
    ],
    "docs": [
      "File headers",
      "Function comments",
      "Inline explanations"
    ],
    "performance": [
      "Optimize re-renders",
      "Lazy loading",
      "Debouncing user inputs"
    ]
  },
  "decisions": [],
  "roadmap": {
    "next": [
      "Define features",
      "Set up stack",
      "Initialize repo"
    ],
    "future": []
  },
  "tasks": {
    "start": "TBD",
    "test": "TBD",
    "env": {
      "vars": [],
      "proxy": "TBD"
    }
  },
  "issues": [],
  "session_log": [
    {
      "date": "2025-11-08",
      "type": "initialization",
      "changes": [
        "created_unified_buildstate_system"
      ],
      "notes": "established master template with consolidated best practices"
    }
  ],
  "change_log": [
    {
      "date": "2025-11-08",
      "version": "v1.1",
      "desc": "Unified SCF template consolidating claude-style and grok-style best practices",
      "synced_with": "buildstate.md"
    }
  ],
  "ai_rules": {
    "purpose": "Guide technical sessions using this file",
    "session_start_protocol": "CRITICAL - Check _session_state first! If last_modified_by != YOUR_ID \u2192 trigger change review before proceeding",
    "session": "Load for coding/debugging; use buildstate.md for ideation and strategy",
    "user_preferences": {
      "description": "Mario's workflow preferences - Be a helpful, contextual, proactive partner",
      "philosophy": "Right action at the right time. Don't force best practices prematurely, but DO recommend them when contextually appropriate.",
      "immediate_setup": {
        "description": "Things to do/verify on first session or project setup",
        "always_check": [
          "AGENTS.md symlink exists (not copy) - critical for ecosystem compatibility",
          "Basic .gitignore present (if git repo exists)",
          "README.md exists with minimal project info"
        ],
        "recommend_if_missing": [
          "If git repo but no .gitignore \u2192 suggest creating one",
          "If no README.md \u2192 offer to create basic one with project context",
          "If AGENTS.md is regular file \u2192 convert to symlink"
        ]
      },
      "contextual_recommendations": {
        "description": "Smart recommendations based on project state and activity",
        "test_suite": {
          "when_to_recommend": [
            "After 2-3 functions/components are implemented",
            "When user asks to 'add feature' or 'implement functionality'",
            "When project has >200 lines of application code",
            "When critical business logic is being written",
            "When bugs are being fixed (suggest regression tests)"
          ],
          "how_to_recommend": "I notice we've built [X functionality]. Would you like me to set up a test suite? I recommend [Jest/Vitest/pytest/etc] based on your stack. This will help catch regressions as we continue building.",
          "dont_recommend_when": [
            "Project is brand new with just boilerplate",
            "Only configuration files exist",
            "User explicitly said 'quick prototype' or 'proof of concept'"
          ]
        },
        "linting_formatting": {
          "when_to_recommend": [
            "After initial code structure is in place",
            "When multiple files exist with inconsistent style",
            "When team collaboration begins (multiple sessions/AIs)"
          ],
          "how_to_recommend": "I see we have [X files] now with some style inconsistencies. Want me to set up ESLint + Prettier (or Black for Python) to maintain consistency?"
        },
        "ci_cd": {
          "when_to_recommend": [
            "After tests exist and project is in git",
            "When user mentions 'deployment' or 'production'",
            "When project reaches stable alpha/beta state"
          ],
          "how_to_recommend": "Since we have tests now, want me to set up GitHub Actions to run them automatically on every push?"
        },
        "refactoring": {
          "when_to_recommend": [
            "When you see same code pattern repeated 3+ times",
            "When functions exceed 50-100 lines",
            "When file has >500 lines",
            "When complexity is clearly hurting readability"
          ],
          "how_to_recommend": "I notice [specific pattern]. I can extract this into [utility/component/function] to reduce duplication and improve maintainability. Should I?"
        }
      },
      "always_do_silently": [
        "Use atomic commits with clear Conventional Commit messages",
        "Update buildstate files when making architectural decisions",
        "Update session state when starting/ending work",
        "Run existing tests before committing (if tests exist)",
        "Follow existing code style and patterns in the project"
      ],
      "always_proactive_about": [
        "Security issues (API keys in code, SQL injection, XSS, etc.) - flag immediately",
        "Obvious bugs or logic errors - point out before implementing",
        "Missing error handling in critical paths - suggest adding",
        "Performance issues in hot paths - mention optimization opportunities",
        "Documentation for complex logic - offer to add comments/docstrings"
      ],
      "never_do": [
        "Force test suites on empty projects",
        "Set up CI/CD before there's anything to test",
        "Add linting to single-file scripts",
        "Over-engineer simple prototypes",
        "Ask repeated questions - remember context from ai_rules",
        "Make assumptions about production readiness for early prototypes"
      ],
      "communication_style": {
        "be_helpful": "Offer recommendations with context: 'I notice X, I suggest Y because Z'",
        "be_concise": "Don't lecture. Brief explanation + offer to implement.",
        "be_timely": "Recommend at the right moment, not too early, not too late",
        "be_actionable": "Always include what you can do: 'Should I set this up?'",
        "learn_preferences": "If Mario says no to a recommendation, remember for similar contexts"
      },
      "productivity_mindset": "Be a helpful partner who anticipates needs at the right time. Know when to recommend vs when to just do it. Quality over premature optimization."
    },
    "self_awareness": {
      "check_session_state": "Read _session_state.last_modified_by and requires_review on every session start",
      "detect_changes": "If last_modified_by != YOUR_SESSION_ID \u2192 another AI made changes",
      "trigger_review": "When changes detected \u2192 assess decisions[], next_steps[], features[]",
      "impact_assessment": "For HIGH IMPACT decisions (7+/10) \u2192 identify risks, dependencies, complexity",
      "approval_required": "DO NOT implement until user approves. Present assessment first.",
      "update_state": "Set _session_state with your session_id, timestamp, increment session_count",
      "mark_review": "Set requires_review=true before closing if you made significant changes"
    },
    "scf_status_check": {
      "description": "Self-check to verify if this project has latest SCF capabilities",
      "user_prompt": "User can ask: 'Check my SCF status' or 'Am I up to date with SCF?'",
      "what_to_check": [
        "\u2713 _session_state exists in buildstate.json",
        "\u2713 self_awareness rules exist in ai_rules",
        "\u2713 AGENTS.md file exists (symlink to buildstate.md)",
        "\u2713 .github/copilot-instructions.md exists",
        "\u2713 .scf/buildstate.library.json exists (inheritance chain)"
      ],
      "scoring": "Count features present: 5/5 = \ud83d\udfe2 Up to date | 3-4/5 = \ud83d\udfe1 Needs sync | 0-2/5 = \ud83d\udd34 Out of date",
      "quick_command": "python3 -c \"import json; from pathlib import Path; bs=json.loads(Path('buildstate.json').read_text()); checks = [('_session_state' in bs, 'Self-aware buildstate'), ('self_awareness' in bs.get('ai_rules', {}), 'AI self-awareness rules'), (Path('AGENTS.md').exists(), 'AGENTS.md'), (Path('.github/copilot-instructions.md').exists(), 'GitHub Copilot'), (Path('.scf/buildstate.library.json').exists(), 'Inheritance chain')]; score = sum(1 for c, _ in checks if c); print('\\n\ud83d\udd0d SCF Status Check:'); [print(f\\\"\u251c\u2500 {name}: {'\u2705' if check else '\u274c'}\\\" for check, name in checks]; print(f'\u2514\u2500 Score: {score}/5'); status = '\ud83d\udfe2 Up to date' if score == 5 else '\ud83d\udfe1 Needs sync' if score >= 3 else '\ud83d\udd34 Out of date'; print(f'\\n\ud83d\udcca {status}')\"",
      "phone_home_on_low_score": {
        "trigger": "If score < 5/5",
        "action": "Sync with latest SCF enhancements",
        "command_template": "python3 {scf_home}/update_scf.py {project_path}",
        "scf_home_from": "_scf_metadata.scf_home",
        "auto_sync": "python3 $(cat buildstate.json | python3 -c 'import sys,json; print(json.load(sys.stdin)[\"_scf_metadata\"][\"scf_home\"])')/update_scf.py $(pwd)"
      }
    },
    "track": "Count exchanges, alert at 80% context limit",
    "update": "Revise features, bugs, next_steps, change_log; sync with buildstate.md",
    "rebalance": "Recommend after major feature implementation or bug fixes"
  },
  "ai_context": {
    "conversation_tracking": true,
    "capacity_monitoring": true,
    "alert_threshold": "80%",
    "rebalance_suggestions": "automated_on_triggers",
    "sync_automation": "sync_buildstate.py framework ready",
    "scf_commands": {
      "help": "/scf_help - Show all SCF commands and reference guide",
      "status": "/scf_status - Check SCF compliance (0-5 score) and verify all features present",
      "sync": "/scf_sync - Phone home to SCF repo and update with latest features",
      "session": "/scf_session - Check who last modified project and review session state",
      "update_state": "/scf_update_state - Mark your session as active in _session_state",
      "rebalance": "/scf_rebalance - Sync buildstate.json \u2194 buildstate.md after major changes",
      "changes": "/scf_changes - Detect recent changes and assess impact/risks",
      "copilot": "/scf_copilot - Generate or update GitHub Copilot integration files",
      "init": "/scf_init - Initialize SCF in a new project from scratch",
      "context": "/scf_context - Load full project context for AI session start",
      "time": "/scf_time - Intelligent token usage estimate with capacity warnings",
      "rules": "/scf_rules - List active rules and behavioral guidelines",
      "closeout": "/scf_closeout - Generate session end summary and update state",
      "learn": "/scf_learn - Study SCF repository patterns and best practices",
      "reference": "Full docs: /home/mario/projects/session-continuity-framework/docs/SCF_COMMANDS_REFERENCE.md"
    }
  },
  "moments": [],
  "voice_context": {
    "last_ai": null,
    "ai_handoff_notes": [],
    "cache_metadata": {
      "cache_id": null,
      "provider": "gemini",
      "model": "gemini-2.0-flash-exp",
      "cached_token_count": 0,
      "cost_savings_usd": 0.0,
      "last_invalidation": null,
      "queries_this_session": 0
    }
  }
}